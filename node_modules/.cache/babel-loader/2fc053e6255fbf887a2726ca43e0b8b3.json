{"ast":null,"code":"var _jsxFileName = \"/Users/florentluu/Documents/Leaflet-GeolocationMap/src/App.js\";\nimport React from 'react';\nimport './App.css';\nimport L from 'leaflet';\nimport { Map, TileLayer, Marker, Popup } from 'react-leaflet';\nimport leafOrange from './assets/leaf-orange.png';\nimport leafShadow from './assets/leaf-shadow.png';\nimport { geolocated } from \"react-geolocated\";\nimport logo from './assets/logo.png';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.orangeIcon = L.icon({\n      iconUrl: leafOrange,\n      shadowUrl: leafShadow,\n      iconSize: [38, 95],\n      // size of the icon\n      shadowSize: [50, 64],\n      // size of the shadow\n      iconAnchor: [22, 94],\n      // point of the icon which will correspond to marker's location\n      shadowAnchor: [4, 62],\n      // the same for the shadow\n      popupAnchor: [-3, -86]\n    });\n    this.state = {\n      ipPosition: null,\n      position: null,\n      ipUser: '',\n      orangeIcon: {\n        lat: '',\n        lng: ''\n      },\n      zoom: 13\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  componentWillMount() {\n    fetch('http://api.ipify.org?format=json?callback=?', {\n      method: 'GET',\n      headers: {}\n    }).then(res => {\n      return res.text();\n    }).then(ip => {\n      this.setState({\n        ipUser: ip\n      });\n      console.log('ip', ip);\n    });\n  }\n\n  componentDidMount() {\n    fetch(`http://ip-api.com/json/${this.state.ipUser}?fields=lat,lon`, {\n      method: 'GET',\n      headers: {}\n    }).then(res => {\n      return res.text();\n    }).then(posIp => {\n      this.setState({\n        ipPosition: posIp\n      });\n      console.log('ipPosition', this.state.ipPosition);\n    });\n  }\n\n  componentDidUpdate() {\n    console.log('COORD', this.state.orangeIcon);\n\n    if (this.state.orangeIcon.lat === '' || null) {\n      this.setState({\n        orangeIcon: {\n          lat: this.props.coords.latitude,\n          lng: this.props.coords.longitude\n        }\n      });\n    }\n  }\n\n  handleChange(event) {\n    this.setState({\n      value: event.target.value\n    });\n  }\n\n  handleSubmit(event) {\n    alert('Message envoyé: ' + this.state.value);\n    event.preventDefault();\n  }\n\n  render() {\n    const positionOrangeIcon = [this.state.orangeIcon.lat, this.state.orangeIcon.lng];\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(Map, {\n      className: \"map\",\n      center: positionOrangeIcon,\n      zoom: this.state.zoom,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, React.createElement(TileLayer, {\n      attribution: \"&copy <a href=\\\"http://osm.org/copyright\\\">OpenStreetMap</a> contributors\",\n      url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }), React.createElement(Marker, {\n      position: positionOrangeIcon,\n      icon: this.orangeIcon,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(Popup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, \"I am an orange leaf\"))), !this.props.isGeolocationAvailable ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \"Your browser does not support Geolocation\") : !this.props.isGeolocationEnabled ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, \"Geolocation is not enabled\") : this.props.coords ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      className: \"container-form\",\n      onSubmit: this.handleSubmit.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"logodiv\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, \"VILLA BALI MANAGEMENT\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      src: logo,\n      alt: \"Logo\",\n      className: \"logo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"contactform\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      name: \"name\",\n      value: this.state.name,\n      className: \"text-primary\",\n      onChange: this.handleChange.bind(this, 'name'),\n      placeholder: \"Lastname\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"text\",\n      name: \"name\",\n      value: this.state.firstname,\n      className: \"text-primary\",\n      onChange: this.handleChange.bind(this, 'firstname'),\n      placeholder: \"Firstname\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"text\",\n      name: \"ip\",\n      value: this.state.ipUser,\n      className: \"text-primary\",\n      onChange: this.handleChange.bind(this, 'ipUser'),\n      placeholder: \"ip\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      name: \"checkIn\",\n      value: this.state.checkIn,\n      className: \"text-primary\",\n      onChange: this.handleChange.bind(this, 'checkIn'),\n      placeholder: \"Check-in\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Check-out\",\n      name: \"checkOut\",\n      className: \"text-primary\",\n      value: this.state.checkOut,\n      onChange: this.handleChange.bind(this, 'checkOut'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Latitude\",\n      name: \"latitude\",\n      className: \"text-primary\",\n      value: this.props.coords.latitude,\n      onChange: this.handleChange.bind(this, 'order'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"text\",\n      name: \"longitude\",\n      value: this.props.coords.longitude,\n      className: \"text-primary\",\n      onChange: this.handleChange.bind(this, 'email'),\n      placeholder: \"Longitude\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      \"text-button\": true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(\"textarea\", {\n      className: \"text-primary\",\n      type: \"text\",\n      name: \"message\",\n      value: this.state.message,\n      onChange: this.handleChange.bind(this, 'message'),\n      placeholder: \"Your message...\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"buttons-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"button-send\",\n      type: \"submit\",\n      onClick: () => this.handleSubmit.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, \"Valider\"))))) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, \"Getting the location data\\u2026 \"));\n  }\n\n}\n\nexport default geolocated({\n  positionOptions: {\n    enableHighAccuracy: false\n  },\n  userDecisionTimeout: 7000\n})(App);","map":{"version":3,"sources":["/Users/florentluu/Documents/Leaflet-GeolocationMap/src/App.js"],"names":["React","L","Map","TileLayer","Marker","Popup","leafOrange","leafShadow","geolocated","logo","App","Component","constructor","props","orangeIcon","icon","iconUrl","shadowUrl","iconSize","shadowSize","iconAnchor","shadowAnchor","popupAnchor","state","ipPosition","position","ipUser","lat","lng","zoom","handleChange","bind","handleSubmit","componentWillMount","fetch","method","headers","then","res","text","ip","setState","console","log","componentDidMount","posIp","componentDidUpdate","coords","latitude","longitude","event","value","target","alert","preventDefault","render","positionOrangeIcon","isGeolocationAvailable","isGeolocationEnabled","name","firstname","checkIn","checkOut","message","positionOptions","enableHighAccuracy","userDecisionTimeout"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './App.css';\nimport L from 'leaflet';\nimport { Map, TileLayer, Marker, Popup } from 'react-leaflet';\nimport leafOrange from './assets/leaf-orange.png';\nimport leafShadow from './assets/leaf-shadow.png';\nimport { geolocated } from \"react-geolocated\";\nimport logo from './assets/logo.png';\nclass App extends React.Component {\n  constructor(props){\n  super(props)\n  this.state = {\n    ipPosition: null,\n    position: null,\n    ipUser: '',\n    orangeIcon: {\n      lat: '',\n      lng: '',\n    },\n    zoom: 13\n  }\n  this.handleChange = this.handleChange.bind(this);\n  this.handleSubmit= this.handleSubmit.bind(this)\n  }\n  componentWillMount() {\n    fetch('http://api.ipify.org?format=json?callback=?', {\n      method: 'GET',\n      headers: {},\n    })\n    .then(res => {\n      return res.text()\n    }).then(ip => { this.setState({ipUser: ip})\n      console.log('ip', ip)\n    });\n  }\n\n  componentDidMount() {\n    fetch(`http://ip-api.com/json/${this.state.ipUser}?fields=lat,lon`, {\n      method: 'GET',\n      headers: {},\n    })\n    .then(res => {\n      return res.text()\n    }).then(posIp => { this.setState({ipPosition: posIp})\n      console.log('ipPosition', this.state.ipPosition)\n    });\n  }\n\n  componentDidUpdate(){ console.log('COORD', this.state.orangeIcon)\n    if(this.state.orangeIcon.lat === '' || null) {\n    this.setState({orangeIcon: {lat:this.props.coords.latitude, lng:this.props.coords.longitude}})\n    }\n  }\n\n  handleChange(event) {\n    this.setState({value: event.target.value});\n  }\n\n  handleSubmit(event) {\n    alert('Message envoyé: '+ this.state.value);\n    event.preventDefault();\n  }\n\n  orangeIcon = L.icon({\n    iconUrl: leafOrange,\n    shadowUrl: leafShadow,\n    iconSize:     [38, 95], // size of the icon\n    shadowSize:   [50, 64], // size of the shadow\n    iconAnchor:   [22, 94], // point of the icon which will correspond to marker's location\n    shadowAnchor: [4, 62],  // the same for the shadow\n    popupAnchor:  [-3, -86]\n  });\n\n  \n  render(){\n    const positionOrangeIcon = [this.state.orangeIcon.lat, this.state.orangeIcon.lng];\n    \n    return (\n      <div>\n        <Map className=\"map\" center={positionOrangeIcon} zoom={this.state.zoom}>\n        <TileLayer\n          attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        />\n        <Marker position={positionOrangeIcon} icon={this.orangeIcon}>\n          <Popup>\n            I am an orange leaf\n          </Popup>\n        </Marker>\n      </Map>\n        {\n        !this.props.isGeolocationAvailable ? (\n            <div>Your browser does not support Geolocation</div>\n        ) : !this.props.isGeolocationEnabled ? (\n            <div>Geolocation is not enabled</div>\n        ) : this.props.coords ? ( \n\n        <div>  \n          <form className=\"container-form\" onSubmit={this.handleSubmit.bind(this)}>\n            <div className='logodiv'>\n              VILLA BALI MANAGEMENT\n              <br/>\n              <img src={logo} alt=\"Logo\" className='logo'/>\n            </div>\n            <div className=\"contactform\">\n                \n                <div className=\"form1\">\n                  <input\n                    type=\"text\"\n                    name=\"name\"\n                    value={this.state.name}\n                    className=\"text-primary\"\n                    onChange={this.handleChange.bind(this, 'name')}\n                    placeholder=\"Lastname\"\n                  />\n                  <input\n                    type=\"text\"\n                    name=\"name\"\n                    value={this.state.firstname}\n                    className=\"text-primary\"\n                    onChange={this.handleChange.bind(this, 'firstname')}\n                    placeholder=\"Firstname\"\n                  /><input\n                  type=\"text\"\n                  name=\"ip\"\n                  value={this.state.ipUser}\n                  className=\"text-primary\"\n                  onChange={this.handleChange.bind(this, 'ipUser')}\n                  placeholder=\"ip\"\n                />\n                </div>\n                <div className=\"form2\">\n                  <input\n                    type=\"text\"\n                    name=\"checkIn\"\n                    value={this.state.checkIn}\n                    className=\"text-primary\"\n                    onChange={this.handleChange.bind(this, 'checkIn')}\n                    placeholder=\"Check-in\"\n                  />\n                  <input\n                    type=\"text\"\n                    placeholder=\"Check-out\"\n                    name=\"checkOut\"\n                    className=\"text-primary\"\n                    value={this.state.checkOut}\n                    onChange={this.handleChange.bind(this, 'checkOut')}\n                  />\n                </div>\n                <div className=\"form3\">\n                  <input\n                    type=\"text\"\n                    placeholder=\"Latitude\"\n                    name=\"latitude\"\n                    className=\"text-primary\"\n                    value={this.props.coords.latitude}\n                    onChange={this.handleChange.bind(this, 'order')}\n                  />\n                  <input\n                    type=\"text\"\n                    name=\"longitude\"\n                    value={this.props.coords.longitude}\n                    className=\"text-primary\"\n                    onChange={this.handleChange.bind(this, 'email')}\n                    placeholder=\"Longitude\"\n                  />\n                </div>\n              </div>\n                <div text-button>\n                  <textarea\n                    className=\"text-primary\"\n                    type=\"text\"\n                    name=\"message\"\n                    value={this.state.message}\n                    onChange={this.handleChange.bind(this, 'message')}\n                    placeholder=\"Your message...\"\n                  />\n                  <div className=\"buttons-container\">\n                    <button\n                      className=\"button-send\"\n                      type=\"submit\"\n                      onClick={() => this.handleSubmit.bind(this)}\n                    >\n                      Valider\n                    </button>\n                  </div>\n            </div>\n          </form> \n        </div>\n        \n        ) : (\n        <div>Getting the location data&hellip; </div>)}\n      </div>\n    );\n  }\n}\n\nexport default geolocated({\n  positionOptions: {\n      enableHighAccuracy: false,\n  },\n  userDecisionTimeout: 7000,\n})(App);\n"]},"metadata":{},"sourceType":"module"}